<main>
  <div class="heading">
    <h3>Today main focus</h3>
    <h2>Design your day</h2>
  </div>
  <form (ngSubmit)="onSubmit()">
    <div class="dots">
      @for (tag of tags; track tag.id) {
      <button
        (click)="selectTag(tag)"
        [class.dot-selected]="selectedTag === tag ? true : false"
        type="button"
        class="dot"
        [style.background-color]="tag.color"
      >
        <span class="hide">{{ tag.name }}</span>
      </button>

      }
    </div>
    <input
      type="text"
      [(ngModel)]="content"
      placeholder="What is your next task?"
      name="content"
      required
    />

    <div class="icons">
      @if(content !==''){
      <button>
        <img src="/assets/images/checkmark-outline.svg" alt="checkmark" />
      </button>
      }

      <app-clock />
      <app-calendar />
    </div>
  </form>

  <div class="tasks">
    <ul>
      @for (todo of todos; track todo.id) {
      <li @enterAnimation [class.completed]="todo.done">
        <p class="dot" [style.background-color]="findTag(todo.tagId)"></p>
        <p class="task-content">{{ todo.content }}</p>
        <p class="task-date">
          {{ todo.date | date }}
        </p>
        <p class="task-time">
          {{
            todo.time.hours < 10 ? "0" + todo.time.hours : todo.time.hours
          }}:{{
            todo.time.minutes < 10 ? "0" + todo.time.minutes : todo.time.minutes
          }}
        </p>
        <button>
          @if(todo.done){
          <button type="button" (click)="completeTask(todo.id)">
            <img src="/assets/images/checked.svg" alt="done" />
          </button>

          }@else {
          <button type="button" (click)="completeTask(todo.id)">
            <img src="/assets/images/eclipse.svg" alt="eclipse" />
          </button>
          }
        </button>
      </li>
      }
    </ul>
  </div>
</main>
